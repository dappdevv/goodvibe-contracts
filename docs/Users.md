# Документация: DAOUsers

## Назначение

Контракт DAOUsers отвечает за регистрацию и хранение пользователей децентрализованной автономной организации (ДАО). Регистрация возможна только по приглашению (инвайту) от действующего пользователя, соответствующего ряду критериев.

## Основные структуры

- **User**: структура пользователя

  - `name` — уникальный никнейм
  - `status` — статус пользователя (ACTIVE, BANNED, BOT, SCAM)
  - `referrer` — адрес пригласившего пользователя
  - `registered` — дата регистрации (timestamp)
  - `userAddress` — адрес пользователя
  - `karma` — карма (по умолчанию 100)
  - `rating` — рейтинг (по умолчанию 5)
  - `level` — уровень (по умолчанию 0)
  - `premium` — дата окончания премиум-подписки (7 дней с регистрации)
  - `verificationCount` — количество верификаций

- **Invite**: структура приглашения
  - `id` — уникальный идентификатор инвайта
  - `inviter` — адрес пригласившего
  - `invitee` — адрес приглашённого
  - `expiresAt` — срок действия (24 часа)
  - `gasAmount` — сумма для оплаты газа
  - `gasPaid` — был ли оплачен газ
  - `used` — использован ли инвайт

## Основные функции

- `createInvite(address invitee, uint256 gasAmount)` — создать приглашение для нового пользователя. Проверяет лимит активных инвайтов (не более 10), статус и карму пригласившего, а также количество верификаций.
- `register(string username, uint256 inviteId)` — регистрация нового пользователя по инвайту. Проверяет уникальность никнейма, валидность и актуальность инвайта. При успешной регистрации переводит оплаченный газ новому пользователю.
- `getActiveInvites(address inviter)` — получить список активных инвайтов пользователя.
- `receive()` — функция для приёма ETH для оплаты газа приглашения.

## События

- `UserRegistered(address user, address referrer, string name)` — новый пользователь зарегистрирован
- `InviteCreated(uint256 id, address inviter, address invitee, uint256 gasAmount)` — создан инвайт
- `InviteUsed(uint256 id, address invitee)` — инвайт использован

## Ограничения и бизнес-логика

- Регистрация только по инвайту от пользователя с кармой ≥ 100, статусом ACTIVE и 3+ верификациями (или 1 от основателя)
- Никнеймы уникальны (проверка по хэшу)
- Инвайт действует 24 часа, после чего становится неактивным
- Не более 10 активных инвайтов на пользователя
- Если инвайт не использован — средства для газа остаются на контракте
- Премиум-подписка выдается на 7 дней с момента регистрации
